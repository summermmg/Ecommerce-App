{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios'; //fetchProducts is a thunk that can dispatch pending, fulfilled or rejected action type.\n//createAsyncThunk accepts three parameters: a string action type value, a payloadCreator \n//callback, and an options object.\n\nexport const fetchProducts = createAsyncThunk('products/fetchProducts', async () => {\n  const response = await axios.get('/api/products');\n  const data = response.data;\n  return data;\n});\nexport const fetchProduct = createAsyncThunk('products/fetchProduct', async id => {\n  const response = await axios.get(`/api/products/${id}`);\n  const data = response.data;\n  return data;\n});\nconst productsSlice = createSlice({\n  name: 'products',\n  initialState,\n  reducers: {\n    productLiked: {\n      reducer(state, action) {\n        state.products.map(product => {\n          if (product.id === action.payload.id) {\n            product.like++;\n          }\n\n          return state;\n        });\n      },\n\n      prepare(product) {\n        return {\n          payload: product\n        };\n      }\n\n    }\n  },\n  extraReducers: {\n    [fetchProducts.pending]: (state, action) => {\n      state.status = 'loading';\n    },\n    [fetchProducts.fulfilled]: (state, action) => {\n      state.status = 'succeeded';\n      state.products = state.products.concat(action.payload);\n    },\n    [fetchProducts.failed]: (state, action) => {\n      state.status = 'failed';\n      state.error = action.error;\n    }\n  }\n});\nexport const {\n  productLiked\n} = productsSlice.actions;\nexport default productsSlice.reducer;","map":{"version":3,"sources":["W:/tzou/ecommerce-app/frontend/src/features/products/productsSlice.js"],"names":["createSlice","createAsyncThunk","axios","fetchProducts","response","get","data","fetchProduct","id","productsSlice","name","initialState","reducers","productLiked","reducer","state","action","products","map","product","payload","like","prepare","extraReducers","pending","status","fulfilled","concat","failed","error","actions"],"mappings":"AAAA,SAAQA,WAAR,EAAqBC,gBAArB,QAA4C,kBAA5C;AACA,OAAOC,KAAP,MAAkB,OAAlB,C,CAGA;AACA;AACA;;AACA,OAAO,MAAMC,aAAa,GAAGF,gBAAgB,CAAC,wBAAD,EAA2B,YAAY;AAChF,QAAMG,QAAQ,GAAG,MAAMF,KAAK,CAACG,GAAN,CAAU,eAAV,CAAvB;AACA,QAAMC,IAAI,GAAGF,QAAQ,CAACE,IAAtB;AACA,SAAOA,IAAP;AACH,CAJ4C,CAAtC;AAMP,OAAO,MAAMC,YAAY,GAAGN,gBAAgB,CAAC,uBAAD,EAA0B,MAAOO,EAAP,IAAc;AAChF,QAAMJ,QAAQ,GAAG,MAAMF,KAAK,CAACG,GAAN,CAAW,iBAAgBG,EAAG,EAA9B,CAAvB;AACA,QAAMF,IAAI,GAAGF,QAAQ,CAACE,IAAtB;AACA,SAAOA,IAAP;AACH,CAJ2C,CAArC;AAMP,MAAMG,aAAa,GAAGT,WAAW,CAAC;AAC9BU,EAAAA,IAAI,EAAE,UADwB;AAE9BC,EAAAA,YAF8B;AAG9BC,EAAAA,QAAQ,EAAE;AACNC,IAAAA,YAAY,EAAC;AACTC,MAAAA,OAAO,CAACC,KAAD,EAAOC,MAAP,EAAe;AAClBD,QAAAA,KAAK,CAACE,QAAN,CAAeC,GAAf,CACIC,OAAO,IAAI;AACP,cAAIA,OAAO,CAACX,EAAR,KAAeQ,MAAM,CAACI,OAAP,CAAeZ,EAAlC,EAAsC;AAClCW,YAAAA,OAAO,CAACE,IAAR;AACH;;AACD,iBAAON,KAAP;AACH,SANL;AAQH,OAVQ;;AAWTO,MAAAA,OAAO,CAACH,OAAD,EAAU;AACb,eAAO;AACHC,UAAAA,OAAO,EAAED;AADN,SAAP;AAGH;;AAfQ;AADP,GAHoB;AAsB9BI,EAAAA,aAAa,EAAE;AACX,KAACpB,aAAa,CAACqB,OAAf,GAAyB,CAACT,KAAD,EAAOC,MAAP,KAAkB;AACvCD,MAAAA,KAAK,CAACU,MAAN,GAAe,SAAf;AACH,KAHU;AAIX,KAACtB,aAAa,CAACuB,SAAf,GAA2B,CAACX,KAAD,EAAOC,MAAP,KAAkB;AACzCD,MAAAA,KAAK,CAACU,MAAN,GAAe,WAAf;AACAV,MAAAA,KAAK,CAACE,QAAN,GAAiBF,KAAK,CAACE,QAAN,CAAeU,MAAf,CAAsBX,MAAM,CAACI,OAA7B,CAAjB;AACH,KAPU;AAQX,KAACjB,aAAa,CAACyB,MAAf,GAAyB,CAACb,KAAD,EAAOC,MAAP,KAAkB;AACvCD,MAAAA,KAAK,CAACU,MAAN,GAAe,QAAf;AACAV,MAAAA,KAAK,CAACc,KAAN,GAAcb,MAAM,CAACa,KAArB;AACH;AAXU;AAtBe,CAAD,CAAjC;AAqCA,OAAO,MAAM;AAAChB,EAAAA;AAAD,IAAiBJ,aAAa,CAACqB,OAArC;AACP,eAAerB,aAAa,CAACK,OAA7B","sourcesContent":["import {createSlice, createAsyncThunk} from '@reduxjs/toolkit'\r\nimport axios from 'axios'\r\n\r\n\r\n//fetchProducts is a thunk that can dispatch pending, fulfilled or rejected action type.\r\n//createAsyncThunk accepts three parameters: a string action type value, a payloadCreator \r\n//callback, and an options object.\r\nexport const fetchProducts = createAsyncThunk('products/fetchProducts', async () => {\r\n    const response = await axios.get('/api/products')\r\n    const data = response.data\r\n    return data\r\n})\r\n\r\nexport const fetchProduct = createAsyncThunk('products/fetchProduct', async (id) => {\r\n    const response = await axios.get(`/api/products/${id}`)\r\n    const data = response.data\r\n    return data\r\n})\r\n\r\nconst productsSlice = createSlice({\r\n    name: 'products',\r\n    initialState,\r\n    reducers: {\r\n        productLiked:{\r\n            reducer(state,action) {\r\n                state.products.map(\r\n                    product => {\r\n                        if (product.id === action.payload.id) {\r\n                            product.like++\r\n                        }\r\n                        return state\r\n                    }\r\n                )\r\n            },\r\n            prepare(product) {\r\n                return {\r\n                    payload: product\r\n                       }\r\n            }\r\n        },\r\n    },\r\n    extraReducers: {\r\n        [fetchProducts.pending]: (state,action) => {\r\n            state.status = 'loading'\r\n        },\r\n        [fetchProducts.fulfilled]: (state,action) => {\r\n            state.status = 'succeeded'\r\n            state.products = state.products.concat(action.payload)\r\n        },\r\n        [fetchProducts.failed] : (state,action) => {\r\n            state.status = 'failed'\r\n            state.error = action.error\r\n        }\r\n    } \r\n})\r\n\r\nexport const {productLiked} = productsSlice.actions\r\nexport default productsSlice.reducer"]},"metadata":{},"sourceType":"module"}