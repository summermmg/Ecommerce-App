{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\nconst initialState = {\n  products: [],\n  status: 'idle',\n  error: null\n}; //fetchProducts is a thunk that can dispatch pending, fulfilled or rejected action type.\n//createAsyncThunk accepts three parameters: a string action type value, a payloadCreator \n//callback, and an options object.\n\nexport const fetchProducts = createAsyncThunk('products/fetchProducts', async () => {\n  const response = await axios.get('/api/products');\n  const data = response.data;\n  return data;\n});\nexport const fetchProduct = createAsyncThunk('products/fetchProduct', async id => {\n  const response = await axios.get(`/api/products/${id}`);\n  const data = response.data;\n  return data;\n});\nconst productsSlice = createSlice({\n  name: 'products',\n  initialState,\n  reducers: {\n    productLiked: {\n      reducer(state, action) {\n        state.products.map(product => {\n          if (product.id === action.payload.id) {\n            product.like++;\n          }\n\n          return state;\n        });\n      },\n\n      prepare(product) {\n        return {\n          payload: product\n        };\n      }\n\n    }\n  },\n  extraReducers: {\n    [fetchProducts.pending]: (state, action) => {\n      state.status = 'loading';\n    },\n    [fetchProducts.fulfilled]: (state, action) => {\n      state.status = 'succeeded';\n      state.products = state.products.concat(action.payload);\n    },\n    [fetchProducts.failed]: (state, action) => {\n      state.status = 'failed';\n      state.error = action.error;\n    }\n  }\n});\nexport const {\n  productLiked\n} = productsSlice.actions;\nexport default productsSlice.reducer;","map":{"version":3,"sources":["W:/tzou/ecommerce-app/frontend/src/features/products/productsSlice.js"],"names":["createSlice","createAsyncThunk","axios","initialState","products","status","error","fetchProducts","response","get","data","fetchProduct","id","productsSlice","name","reducers","productLiked","reducer","state","action","map","product","payload","like","prepare","extraReducers","pending","fulfilled","concat","failed","actions"],"mappings":"AAAA,SAAQA,WAAR,EAAqBC,gBAArB,QAA4C,kBAA5C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,MAAMC,YAAY,GAAG;AACjBC,EAAAA,QAAQ,EAAE,EADO;AAEjBC,EAAAA,MAAM,EAAE,MAFS;AAGjBC,EAAAA,KAAK,EAAC;AAHW,CAArB,C,CAMA;AACA;AACA;;AACA,OAAO,MAAMC,aAAa,GAAGN,gBAAgB,CAAC,wBAAD,EAA2B,YAAY;AAChF,QAAMO,QAAQ,GAAG,MAAMN,KAAK,CAACO,GAAN,CAAU,eAAV,CAAvB;AACA,QAAMC,IAAI,GAAGF,QAAQ,CAACE,IAAtB;AACA,SAAOA,IAAP;AACH,CAJ4C,CAAtC;AAMP,OAAO,MAAMC,YAAY,GAAGV,gBAAgB,CAAC,uBAAD,EAA0B,MAAOW,EAAP,IAAc;AAChF,QAAMJ,QAAQ,GAAG,MAAMN,KAAK,CAACO,GAAN,CAAW,iBAAgBG,EAAG,EAA9B,CAAvB;AACA,QAAMF,IAAI,GAAGF,QAAQ,CAACE,IAAtB;AACA,SAAOA,IAAP;AACH,CAJ2C,CAArC;AAMP,MAAMG,aAAa,GAAGb,WAAW,CAAC;AAC9Bc,EAAAA,IAAI,EAAE,UADwB;AAE9BX,EAAAA,YAF8B;AAG9BY,EAAAA,QAAQ,EAAE;AACNC,IAAAA,YAAY,EAAC;AACTC,MAAAA,OAAO,CAACC,KAAD,EAAOC,MAAP,EAAe;AAClBD,QAAAA,KAAK,CAACd,QAAN,CAAegB,GAAf,CACIC,OAAO,IAAI;AACP,cAAIA,OAAO,CAACT,EAAR,KAAeO,MAAM,CAACG,OAAP,CAAeV,EAAlC,EAAsC;AAClCS,YAAAA,OAAO,CAACE,IAAR;AACH;;AACD,iBAAOL,KAAP;AACH,SANL;AAQH,OAVQ;;AAWTM,MAAAA,OAAO,CAACH,OAAD,EAAU;AACb,eAAO;AACHC,UAAAA,OAAO,EAAED;AADN,SAAP;AAGH;;AAfQ;AADP,GAHoB;AAsB9BI,EAAAA,aAAa,EAAE;AACX,KAAClB,aAAa,CAACmB,OAAf,GAAyB,CAACR,KAAD,EAAOC,MAAP,KAAkB;AACvCD,MAAAA,KAAK,CAACb,MAAN,GAAe,SAAf;AACH,KAHU;AAIX,KAACE,aAAa,CAACoB,SAAf,GAA2B,CAACT,KAAD,EAAOC,MAAP,KAAkB;AACzCD,MAAAA,KAAK,CAACb,MAAN,GAAe,WAAf;AACAa,MAAAA,KAAK,CAACd,QAAN,GAAiBc,KAAK,CAACd,QAAN,CAAewB,MAAf,CAAsBT,MAAM,CAACG,OAA7B,CAAjB;AACH,KAPU;AAQX,KAACf,aAAa,CAACsB,MAAf,GAAyB,CAACX,KAAD,EAAOC,MAAP,KAAkB;AACvCD,MAAAA,KAAK,CAACb,MAAN,GAAe,QAAf;AACAa,MAAAA,KAAK,CAACZ,KAAN,GAAca,MAAM,CAACb,KAArB;AACH;AAXU;AAtBe,CAAD,CAAjC;AAqCA,OAAO,MAAM;AAACU,EAAAA;AAAD,IAAiBH,aAAa,CAACiB,OAArC;AACP,eAAejB,aAAa,CAACI,OAA7B","sourcesContent":["import {createSlice, createAsyncThunk} from '@reduxjs/toolkit'\r\nimport axios from 'axios'\r\n\r\nconst initialState = {\r\n    products: [],\r\n    status: 'idle',\r\n    error:null,\r\n}\r\n\r\n//fetchProducts is a thunk that can dispatch pending, fulfilled or rejected action type.\r\n//createAsyncThunk accepts three parameters: a string action type value, a payloadCreator \r\n//callback, and an options object.\r\nexport const fetchProducts = createAsyncThunk('products/fetchProducts', async () => {\r\n    const response = await axios.get('/api/products')\r\n    const data = response.data\r\n    return data\r\n})\r\n\r\nexport const fetchProduct = createAsyncThunk('products/fetchProduct', async (id) => {\r\n    const response = await axios.get(`/api/products/${id}`)\r\n    const data = response.data\r\n    return data\r\n})\r\n\r\nconst productsSlice = createSlice({\r\n    name: 'products',\r\n    initialState,\r\n    reducers: {\r\n        productLiked:{\r\n            reducer(state,action) {\r\n                state.products.map(\r\n                    product => {\r\n                        if (product.id === action.payload.id) {\r\n                            product.like++\r\n                        }\r\n                        return state\r\n                    }\r\n                )\r\n            },\r\n            prepare(product) {\r\n                return {\r\n                    payload: product\r\n                       }\r\n            }\r\n        },\r\n    },\r\n    extraReducers: {\r\n        [fetchProducts.pending]: (state,action) => {\r\n            state.status = 'loading'\r\n        },\r\n        [fetchProducts.fulfilled]: (state,action) => {\r\n            state.status = 'succeeded'\r\n            state.products = state.products.concat(action.payload)\r\n        },\r\n        [fetchProducts.failed] : (state,action) => {\r\n            state.status = 'failed'\r\n            state.error = action.error\r\n        }\r\n    } \r\n})\r\n\r\nexport const {productLiked} = productsSlice.actions\r\nexport default productsSlice.reducer"]},"metadata":{},"sourceType":"module"}